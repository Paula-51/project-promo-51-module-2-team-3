document.querySelector(".js_image");const S=document.querySelector(".js__profile-image"),u=document.querySelector(".js_color"),d=document.querySelector(".js_signo-zodiacal"),l=document.querySelector(".js_signoPreview"),h=document.querySelector(".js_resetBtn"),b=document.querySelector(".js_containerFill form"),I=document.querySelector(".js_formBtn"),w=document.querySelector(".js_containerShare"),c=document.querySelector(".js_preview_card"),q=document.querySelectorAll('input[name="elemento"]');document.querySelector(".js_containerDesign");document.querySelector(".js_viewBtn");const C={aries:"Aries ♈",tauro:"Tauro ♉",geminis:"Geminis ♊",cancer:"Cancer ♋",leo:"Leo ♌",virgo:"Virgo ♍",libra:"Libra ♎",escorpio:"Escorpio ♏",sagitario:"Sagitario ♐",capricornio:"Capricornio ♑",acuario:"Acuario ♒",piscis:"Piscis ♓"},E={agua:1,fuego:2,tierra:3,aire:4},s=document.createElement("p");s.style.wordBreak="break-word";w&&w.appendChild(s);function L(e){return e?e.startsWith("@")?e:"@"+e:""}function v(e,o){const t=document.querySelector(`.${e}`),a=document.querySelector(`.${o}`);if(!t||!a)return;const r=t.querySelector("i");t.addEventListener("click",()=>{a.classList.toggle("collapsed"),r&&(r.classList.toggle("fa-arrow-up"),r.classList.toggle("fa-arrow-down"))})}function _(){const e=document.querySelector('input[name="elemento"]:checked');!e||!c||(c.classList.remove("agua","fuego","tierra","aire"),c.classList.add(e.value.toLowerCase()))}function g(e,o,t,a){const r=document.querySelector(e),n=document.querySelector(o);if(!r||!n)return;const i=localStorage.getItem(t);i&&(r.value=i);const f=()=>{let p=r.value;a&&(p=a(p)),n.textContent=p||n.getAttribute("data-placeholder"),localStorage.setItem(t,r.value)};r.addEventListener("input",f),r.addEventListener("change",f),f()}function j(){if(!d||!l)return;const e=d.value;localStorage.setItem("form_signo",e),e&&C[e]?l.textContent=C[e]:l.textContent=l.getAttribute("data-placeholder")}function D(){const e=document.querySelector(".js_image"),o=document.querySelector(".js__profile-image"),t=document.querySelector(".js__profile-preview");!e||!o||!t||(window.addEventListener("load",()=>{const a=localStorage.getItem("imageData");a?(o.src=a,t.style.backgroundImage=`url("${a}")`):(o.src="https://placecats.com/100/100",t.style.backgroundImage='url("https://placecats.com/100/100")')}),e.addEventListener("change",()=>{const a=e.files[0];if(a){const r=new FileReader;r.onload=()=>{const n=r.result;o.src=n,t.style.backgroundImage=`url("${n}")`,localStorage.setItem("imageData",n)},r.readAsDataURL(a)}else o.src="https://placecats.com/100/100",t.style.backgroundImage='url("https://placecats.com/100/100")',localStorage.removeItem("imageData")}))}function k(){if(!u||!S||!c)return;const e=document.querySelector(".preview__card img"),o=localStorage.getItem("form_color");o&&(u.value=o,S.style.borderColor=o,e&&(e.style.borderColor=o),c.style.borderColor=o,c.style.boxShadow=`0 0 10px ${o}`),u.addEventListener("input",()=>{const t=u.value;S.style.borderColor=t,e&&(e.style.borderColor=t),c.style.borderColor=t,c.style.boxShadow=`0 0 10px ${t}`,localStorage.setItem("form_color",t)})}function x(){!h||!b||h.addEventListener("click",()=>{b.reset(),document.querySelectorAll(".preview__card p").forEach(a=>{const r=a.getAttribute("data-placeholder");r&&(a.textContent=r)}),localStorage.removeItem("form_name"),localStorage.removeItem("form_birthDate"),localStorage.removeItem("form_mobileNumber"),localStorage.removeItem("form_instagram"),localStorage.removeItem("form_color"),localStorage.removeItem("form_signo"),localStorage.removeItem("imageData");const e=document.querySelector(".js__profile-image"),o=document.querySelector(".js__profile-preview"),t="https://placecats.com/100/100";e&&(e.src=t),o&&(o.style.backgroundImage=`url("${t}")`),c&&(c.style.borderColor="",c.style.boxShadow=""),localStorage.clear()})}async function $(e){e.preventDefault(),s.textContent="⏳ Creando tarjeta...";const o=document.querySelector('input[name="elemento"]:checked'),a={field1:o?E[o.value.toLowerCase()]:0,field2:document.querySelector("#name").value,field3:document.querySelector("#signo-zodiacal").value,field4:document.querySelector("#birthDate").value,field5:document.querySelector("#mobileNumber").value,field6:L(document.querySelector("#instagram").value),field7:document.querySelector("#color").value,photo:localStorage.getItem("imageData")||""};try{const n=await(await fetch("https://dev.adalab.es/api/info/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();if(n.success){const i=`card.html?id=${n.infoID}`;s.innerHTML=`✅ Tarjeta creada: <a href="${i}" target="_blank">${i}</a>`}else s.textContent=`❌ Error: ${n.error}`}catch(r){s.textContent="❌ Error al crear la tarjeta: "+r.message}}v("js_toggleDesign","js_containerDesign");v("js_toggleFill","js_containerFill");v("js_toggleShare","js_containerShare");g("#name",".js_namePreview","form_name");g("#birthDate",".js_datePreview","form_birthDate",e=>e?new Date(e).toLocaleDateString():"");g("#mobileNumber",".js_mobilePreview","form_mobileNumber");g("#instagram",".js_igPreview","form_instagram",e=>e?e.startsWith("@")?e:"@"+e:"");_();_();q.forEach(e=>{e.addEventListener("change",_)});D();k();if(d&&l){const e=localStorage.getItem("form_signo");e&&(d.value=e),d.addEventListener("change",j),j()}x();I&&I.addEventListener("click",$);const B=new URLSearchParams(window.location.search),P=B.get("id"),y=document.getElementById("name"),A=document.getElementById("sign"),T=document.getElementById("birthdate"),N=document.getElementById("mobile"),R=document.getElementById("instagram"),F=document.getElementById("photo"),m=document.getElementById("card");async function M(){try{const o=await(await fetch(`https://dev.adalab.es/api/info/${P}`)).json();if(o.success){const t=o.data;switch(console.log(t),y.textContent=` ${t.field2}`,A.textContent=` ${t.field3}`,T.textContent=` ${t.field4}`,N.textContent=` ${t.field5}`,R.textContent=`${t.field6}`,t.photo&&(F.style.backgroundImage=`url(${t.photo})`),t.field1){case 1:m.classList.add("agua");break;case 2:m.classList.add("fuego");break;case 3:m.classList.add("tierra");break;case 4:m.classList.add("aire");break;default:break}}else y.textContent="❌ No se pudo cargar la tarjeta."}catch(e){y.textContent=`❌ Error: ${e.message}`}}M();
//# sourceMappingURL=main.js.map
