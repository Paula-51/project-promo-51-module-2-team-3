document.querySelector(".js_image");const S=document.querySelector(".js__profile-image"),m=document.querySelector(".js_color"),u=document.querySelector(".js_signo-zodiacal"),s=document.querySelector(".js_signoPreview"),v=document.querySelector(".js_resetBtn"),_=document.querySelector(".js_containerFill form"),h=document.querySelector(".js_formBtn"),b=document.querySelector(".js_containerShare"),c=document.querySelector(".js_preview_card"),I=document.querySelectorAll('input[name="elemento"]');document.querySelector(".js_containerDesign");document.querySelector(".js_viewBtn");const w={aries:"Aries ♈",tauro:"Tauro ♉",geminis:"Geminis ♊",cancer:"Cancer ♋",leo:"Leo ♌",virgo:"Virgo ♍",libra:"Libra ♎",escorpio:"Escorpio ♏",sagitario:"Sagitario ♐",capricornio:"Capricornio ♑",acuario:"Acuario ♒",piscis:"Piscis ♓"},j={agua:1,fuego:2,tierra:3,aire:4},i=document.createElement("p");i.style.wordBreak="break-word";b&&b.appendChild(i);function C(e){return e?e.startsWith("@")?e:"@"+e:""}function p(e,t){const o=document.querySelector(`.${e}`),a=document.querySelector(`.${t}`);if(!o||!a)return;const r=o.querySelector("i");o.addEventListener("click",()=>{a.classList.toggle("collapsed"),r&&(r.classList.toggle("fa-arrow-up"),r.classList.toggle("fa-arrow-down"))})}function y(){const e=document.querySelector('input[name="elemento"]:checked');!e||!c||(c.classList.remove("agua","fuego","tierra","aire"),c.classList.add(e.value.toLowerCase()))}function d(e,t,o,a){const r=document.querySelector(e),n=document.querySelector(t);if(!r||!n)return;const l=localStorage.getItem(o);l&&(r.value=l);const g=()=>{let f=r.value;a&&(f=a(f)),n.textContent=f||n.getAttribute("data-placeholder"),localStorage.setItem(o,r.value)};r.addEventListener("input",g),r.addEventListener("change",g),g()}function q(){if(!u||!s)return;const e=u.value;localStorage.setItem("form_signo",e),e&&w[e]?s.textContent=w[e]:s.textContent=s.getAttribute("data-placeholder")}function L(){const e=document.querySelector(".js_image"),t=document.querySelector(".js__profile-image"),o=document.querySelector(".js__profile-preview");!e||!t||!o||(window.addEventListener("load",()=>{const a=localStorage.getItem("imageData");a?(t.src=a,o.style.backgroundImage=`url("${a}")`):(t.src="https://placecats.com/100/100",o.style.backgroundImage='url("https://placecats.com/100/100")')}),e.addEventListener("change",()=>{const a=e.files[0];if(a){const r=new FileReader;r.onload=()=>{const n=r.result;t.src=n,o.style.backgroundImage=`url("${n}")`,localStorage.setItem("imageData",n)},r.readAsDataURL(a)}else t.src="https://placecats.com/100/100",o.style.backgroundImage='url("https://placecats.com/100/100")',localStorage.removeItem("imageData")}))}function D(){if(!m||!S||!c)return;const e=document.querySelector(".preview__card img"),t=localStorage.getItem("form_color");t&&(m.value=t,S.style.borderColor=t,e&&(e.style.borderColor=t),c.style.borderColor=t,c.style.boxShadow=`0 0 10px ${t}`),m.addEventListener("input",()=>{const o=m.value;S.style.borderColor=o,e&&(e.style.borderColor=o),c.style.borderColor=o,c.style.boxShadow=`0 0 10px ${o}`,localStorage.setItem("form_color",o)})}function E(){!v||!_||v.addEventListener("click",()=>{_.reset(),document.querySelectorAll(".preview__card p").forEach(a=>{const r=a.getAttribute("data-placeholder");r&&(a.textContent=r)}),localStorage.removeItem("form_name"),localStorage.removeItem("form_birthDate"),localStorage.removeItem("form_mobileNumber"),localStorage.removeItem("form_instagram"),localStorage.removeItem("form_color"),localStorage.removeItem("form_signo"),localStorage.removeItem("imageData");const e=document.querySelector(".js__profile-image"),t=document.querySelector(".js__profile-preview"),o="https://placecats.com/100/100";e&&(e.src=o),t&&(t.style.backgroundImage=`url("${o}")`),c&&(c.style.borderColor="",c.style.boxShadow=""),localStorage.clear()})}async function k(e){e.preventDefault(),i.textContent="⏳ Creando tarjeta...";const t=document.querySelector('input[name="elemento"]:checked'),a={field1:t?j[t.value.toLowerCase()]:0,field2:document.querySelector("#name").value,field3:document.querySelector("#signo-zodiacal").value,field4:document.querySelector("#birthDate").value,field5:document.querySelector("#mobileNumber").value,field6:C(document.querySelector("#instagram").value),field7:document.querySelector("#color").value,photo:localStorage.getItem("imageData")||""};try{const n=await(await fetch("https://dev.adalab.es/api/info/data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();if(n.success){const l=`card.html?id=${n.infoID}`;i.innerHTML=`✅ Tarjeta creada: <a href="${l}" target="_blank">${l}</a>`}else i.textContent=`❌ Error: ${n.error}`}catch(r){i.textContent="❌ Error al crear la tarjeta: "+r.message}}p("js_toggleDesign","js_containerDesign");p("js_toggleFill","js_containerFill");p("js_toggleShare","js_containerShare");d("#name",".js_namePreview","form_name");d("#birthDate",".js_datePreview","form_birthDate",e=>e?new Date(e).toLocaleDateString():"");d("#mobileNumber",".js_mobilePreview","form_mobileNumber");d("#instagram",".js_igPreview","form_instagram",e=>e?e.startsWith("@")?e:"@"+e:"");y();y();I.forEach(e=>{e.addEventListener("change",y)});L();D();if(u&&s){const e=localStorage.getItem("form_signo");e&&(u.value=e),u.addEventListener("change",q),q()}E();h&&h.addEventListener("click",k);
//# sourceMappingURL=main.js.map
